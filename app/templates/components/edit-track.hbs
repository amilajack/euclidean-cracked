  {{ui-slider
    max=1
    min=0
    size=gainSliderSize
    step=0.01
    class='gain-slider'
    onChangeValue=(action "updateSequenceParam" track 'gain')
    value=track.gain
  }}

  <div class="btn-group-vertical track-interface-switches" role="group" aria-label="toggle-interface">
    <button {{action 'switchInterface' 'rhythm'}}
      class="circle-btn btn-xs rhythm"
      type="button">
       {{bs-tooltip  placement="right" title="Euclidean Rhythm Sequence"}}
      E
    </button>
    <button {{action 'switchInterface' 'steps'}}
      class="circle-btn btn-xs steps"
      type="button">
       {{bs-tooltip  placement="right" title="Automation controls"}}
      A
    </button>
    <button {{action 'switchInterface' 'function'}}
      class="circle-btn btn-xs function"
      type="button">
       {{bs-tooltip placement="right"  title="Function editor"}}
      F
    </button>
  </div>

  <div class="inner-ui-controls">
    {{#audio-track-sampler
      sequence=sequence
      directory=directory
      track=track
      gain=track.gain
      isLooping=track.isLooping
      filename=track.filename
      outputNodeSelector="#master-compressor"
      as |sampler|
    }}

      {{ui-step-sequencer
        sequence=sequence
        stepIndex=sampler.stepIndex
      }}

      <div class="row interface-row">

        <div class="file-select">
          {{ui-select
            choices=filenames
            onChangeValue=(action "updateFilename" track)
            value=track.filename
          }}
        </div>
        <button type='delete' class='btn btn-danger delete-track'
          {{action 'deleteTrack' track}} >
          âœ•
        </button>
      </div>

      {{#if (eq visibleInterface 'steps' )}}
        {{step-param-sliders
          uiStepSize=uiStepSize
          sequence=sequence
          track=track
          stepIndex=sampler.stepIndex
        }}
      {{/if}}

      {{#if (eq visibleInterface 'rhythm' )}}
        <div class="sequence-dials">
          {{#ui-dial
            max=16
            step=1
            onChangeValue=(action "updateSequenceParam" track 'hits')
            value=track.hits
          }}
          <dl>
            <dt>hits</dt>
            <dd>{{track.hits}}</dd>
          </dl>
          {{/ui-dial}}

          {{#ui-dial
            max=16
            step=1
            onChangeValue=(action "updateSequenceParam" track 'steps')
            value=track.steps
          }}
            <dl>
              <dt>steps</dt>
              <dd>{{track.steps}}</dd>
            </dl>
          {{/ui-dial}}

          {{#ui-dial
            max=16
            step=1
            onChangeValue=(action "updateSequenceParam" track 'offset')
            value=track.offset
          }}
            <dl>
              <dt>offset</dt>
              <dd>{{track.offset}}</dd>
            </dl>
          {{/ui-dial}}
        </div>
      {{/if}}

      {{#if (eq visibleInterface 'function')}}

        {{track-function-editor track=track sampler=sampler}}

      {{/if}}
    {{/audio-track-sampler}}
  </div>

  {{euclidean-sequence
    hits=track.hits
    steps=track.steps
    offset=track.offset
    onCalculateSequence=(action "setTrackSequence" track)
  }}

  {{yield}}
